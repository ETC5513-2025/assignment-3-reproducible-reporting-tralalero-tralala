---
title: "Your Presentation Title"
author: "Zhuo Zhang, Bhavi Singh, Gen Sheng Goh"
format:
  revealjs:
    theme: solarized
    transition: fade
    slide-number: true
editor: visual
---

```{r}
#| message: false
#| warning: false
#| echo: false

library(tidyverse)
library(ggplot2)
library(scales)
library(kableExtra)
library(knitr)

knitr::opts_chunk$set(message = FALSE,
                      warning = FALSE,
                      echo = FALSE)
```

```{r}
# Import data and filtering the variables
epl_raw <- read.csv("data/epl_final.csv")

epl_data <- epl_raw %>%
  select(Season, HomeTeam, AwayTeam, FullTimeResult, HomeShots, AwayShots)


# Filter to only include most recent seasons
recent_seasons <- c("2015/16", "2016/17", "2017/18", "2018/19", "2019/20",
                    "2020/21", "2021/22", "2022/23", "2023/24", "2024/25")

epl_recent <- epl_data %>%
  filter(Season %in% recent_seasons)
```

## Dataset Overview

::: columns
::: {.column width="50%" .smaller}

![](data/kaggle_ss.png)

The dataset contains match-level statistics for EPL football games, including **scores, shots, fouls, cards, and results**.

:::

::: {.column width="45%"  .smaller}

Seasons used: **2015/16 to 2024/25**

Extracted variables:

  - `Season`
  
  - `HomeTeam`, `AwayTeam`
  
  - `FullTimeResult`
  
  - `HomeShots`, `AwayShots`

:::
:::

---

## Final Dataset and Variables

```{r}
library(kableExtra)

variable_description <- tibble::tibble(
  Variable = c("Season", "Team", "TotalMatches", "TotalShots", "TotalWins", 
               "AvgShotsPerGame", "WinRatePercent"),
  Description = c(
    "The English Premier League season (e.g., '2015/16')",
    "Name of the football team",
    "Total number of matches played by the team that season",
    "Total number of shots taken by the team across the season",
    "Total number of wins recorded by the team that season",
    "Average number of shots made by the team each game in that season",
    "Win rate percentage (TotalWins / TotalMatches * 100)"))

kbl(variable_description, caption = "Variable Descriptions of Final Dataset") %>%
  kable_styling(full_width = FALSE, font_size = 17)
```

- The final dataset contains 200 observations and 7 variables.

- **Win Rate Percent as performance indicator:** Reflects a teamâ€™s ability to outperform opponents and wins yield the most league points.

---

## Methodology {.smaller}

```{r}
# Get stats for home games
home_stats <- epl_recent %>%
  mutate(
    Team = HomeTeam,
    Shots = HomeShots,
    Win = ifelse(FullTimeResult == "H", 1, 0)
  ) %>%
  select(Season, Team, Shots, Win)

# Get stats for away games
away_stats <- epl_recent %>%
  mutate(
    Team = AwayTeam,
    Shots = AwayShots,
    Win = ifelse(FullTimeResult == "A", 1, 0)
  ) %>%
  select(Season, Team, Shots, Win)

# Combine datasets for home and away stats
team_match_data <- bind_rows(home_stats, away_stats)

team_season_summary <- team_match_data %>%
  group_by(Season, Team) %>%
  summarise(
    TotalMatches = n(),
    TotalShots = sum(Shots, na.rm = TRUE),
    TotalWins = sum(Win, na.rm = TRUE),
    AvgShotsPerGame = TotalShots / TotalMatches,
    WinRatePercent = 100 * TotalWins / TotalMatches
  ) %>%
  ungroup()

team_season_summary %>%
  head(4) %>%
  kbl(caption = "Preview of Team-Season Summary Dataset") %>%
  kable_styling(full_width = FALSE, font_size = 16)
```


To explore the relationship between **offensive output** and **match success**, we conducted a season-by-season analysis of team performance in the EPL.

- We calculated **Average Shots Per Game** and **Win Rate Percent** for each team in each season.
- Each row in the dataset represents a **team-season** combination.
- We visualized the relationship using a **scatter plot**, with:
  - X-axis: **AvgShotsPerGame**
  - Y-axis: **WinRatePercent**
- This allows us to assess whether teams that shoot more tend to **win more matches**.
